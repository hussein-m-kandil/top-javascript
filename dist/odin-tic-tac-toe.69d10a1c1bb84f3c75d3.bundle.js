!function(){"use strict";var t=function(){let t;return{init:function(){t={}},add:function(e,n){"string"==typeof e&&"function"==typeof n&&(t[e]=t[e]??[],t[e].push(n))},remove:function(e,n){if("string"==typeof e){const E=t[e];if(Array.isArray(E)){const i=E.indexOf(n);i>-1&&(E.splice(i,1),E.length<1&&delete t[e])}}},emit:function(e){for(var n=arguments.length,E=new Array(n>1?n-1:0),i=1;i<n;i++)E[i-1]=arguments[i];if("string"==typeof e){const n=t[e];Array.isArray(n)&&n.forEach((t=>t(...E)))}},START_EVENT_NAME:"start",STARTED_EVENT_NAME:"started",HARD_GAME_EVENT_NAME:"hard",MEDIUM_GAME_EVENT_NAME:"medium",EASY_GAME_EVENT_NAME:"easy",ONE_PLAYER_GAME_EVENT_NAME:"oneplayergame",WIN_EVENT_NAME:"win",MARK_EVENT_NAME:"mark",MARKING_EVENT_NAME:"marking",MARKED_EVENT_NAME:"marked",TIE_EVENT_NAME:"tie",RESET_EVENT_NAME:"reset",RESET_BOARD_EVENT_NAME:"resetboard",RESTART_EVENT_NAME:"restart",COMPUTER_TURN_EVENT_NAME:"computerturn",USER_TURN_EVENT_NAME:"userturn"}}(),e=function(){const t=Array(9),e=[];let n,E,i,o,r,c;function d(){t.fill("",0),e.splice(0),clearTimeout(E),i=!1}function u(t){return t[0]&&t[0]===t[1]&&t[1]===t[2]||t[3]&&t[3]===t[4]&&t[4]===t[5]||t[6]&&t[6]===t[7]&&t[7]===t[8]||t[0]&&t[0]===t[3]&&t[3]===t[6]||t[1]&&t[1]===t[4]&&t[4]===t[7]||t[2]&&t[2]===t[5]&&t[5]===t[8]||t[0]&&t[0]===t[4]&&t[4]===t[8]||t[6]&&t[6]===t[4]&&t[4]===t[2]}function N(){for(let e=0;e<t.length;e++)if(!t[e])return!0}function a(E,o){i=!1;const r=function(t){const e=Number(t);return Number.isInteger(e)&&e>=0&&e<9?e:-1}(E);r>-1&&N()&&function(e){return!t[e]}(r)&&(t[r]=o,e.push(r),function(e){u(t)?n.emit(n.WIN_EVENT_NAME,e):N()||n.emit(n.TIE_EVENT_NAME)}(o),n.emit(n.MARKED_EVENT_NAME,r,o))}function _(){let t;do{t=Math.floor(9*Math.random())}while(e.includes(t));return t}function T(t,n){for(let E=0;E<9;E++)if(!e.includes(E)){const e=t[E];if(t[E]=n,u(t))return E;t[E]=e}return null}function A(c,d){let u;u=o||r?function(n,E){const i=[...t];return o?T(i,n)??T(i,E)??function(){if(!e.includes(4))return 4;const t=function(t){const e=[0,2,6,8];for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}();for(let n=0;n<t.length;n++)if(!e.includes(t[n]))return t[n];return null}()??_():T(i,n)??T(i,E)??_()}(c,d):function(n,E){const i=[...t],o=Math.floor(2*Math.random())+2;return T(i,n)??(e.length%o==0?T(i,E):null)??_()}(c,d),E=setTimeout((()=>{a(u,c),n.emit(n.MARKED_EVENT_NAME,u,c),n.emit(n.USER_TURN_EVENT_NAME)}),i?1500:1e3)}function s(t,e){a(t,e)}function l(){d()}function M(){i=!0}function f(){o=!0}function p(){r=!0}function m(){c=!0}return{init:function(t){n=t,o=!1,r=!1,c=!1,d(),n.add(n.RESET_BOARD_EVENT_NAME,l),n.add(n.START_EVENT_NAME,M),n.add(n.HARD_GAME_EVENT_NAME,f),n.add(n.MEDIUM_GAME_EVENT_NAME,p),n.add(n.EASY_GAME_EVENT_NAME,m),n.add(n.COMPUTER_TURN_EVENT_NAME,A),n.add(n.MARKING_EVENT_NAME,s)}}}(),n=function(){const t=document.createElement("dialog"),e=[];let n,E,i,o,r,c,d,u;function N(t){t.setAttribute("style","opacity: 0; transform: scale(75%);")}function a(t){setTimeout((()=>{t.setAttribute("style","opacity: 1; transform: scale(100%);"),t.removeAttribute("style")}),200)}function _(t,e,n,E){const i=document.createElement(t);if(e&&(i.className=e),n&&(i.textContent=n),Array.isArray(E)&&E.length>0)for(let t=0;t<E.length;t++)Array.isArray(E[t])&&2===E[t].length&&i.setAttribute(E[t][0],E[t][1]);return i}function T(){N(E),document.body.appendChild(E),a(E)}function A(t,e,n){const E=[];for(let i=0;i<e.length;i++)E[i]=_("button",t,e[i],[["type","button"],["value",e[i].slice(0,1).toLowerCase()]]),E[i].addEventListener("click",n);return E}function s(e){t.children.length>0&&[...t.children].forEach((t=>t.remove()));const n=_("div","dialog-content");n.append(...e),t.appendChild(n)}function l(){document.body.appendChild(t),N(t),t.showModal(),a(t)}function M(){t.close(),setTimeout((()=>t.remove()),500)}function f(t){const e=_("button","dialog-close circle-btn","x",[["type","button"]]);e.addEventListener("click",M),s([e,_("div","message",t)]),setTimeout(l,500)}function p(t){const e=Number(t.target.value);n.emit(n.START_EVENT_NAME,e),i.textContent=1===e?"1 Player":"2 Players"}function m(){e.forEach((t=>t.textContent=""))}function V(t){1===t?s(A("players-type-choice",["X","O"],(t=>{var e;e=t.target.value,s(A("difficulty-level",["Easy","Medium","Hard"],(t=>{const E=t.target.value;M(),T(),n.emit(n.ONE_PLAYER_GAME_EVENT_NAME,e,E)})))}))):(M(),T())}function R(t){d.textContent=t}function y(t,n){e[t].textContent=n,function(t){"x"===t.toLowerCase()?d.textContent="O":d.textContent="X"}(n)}function v(t){if(f(t+" Win!"),"X"===t){let t=Number(o.textContent);o.textContent=t?++t:1}else{let t=Number(r.textContent);r.textContent=t?++t:1}}function g(){f("Tie!");let t=Number(c.textContent);c.textContent=t?++t:1}function h(t){d.textContent=t,m()}function C(){const t=_("span","game-level"," (Hard)");i.appendChild(t)}function S(){const t=_("span","game-level"," (Medium)");i.appendChild(t)}function x(){const t=_("span","game-level"," (Easy)");i.appendChild(t)}return{init:function(t){n=t,E||function(){const t=_("div","settings");i=_("div","players-num","2 Players"),u=_("button","reset circle-btn","â†º",[["type","button"]]),u.addEventListener("click",(()=>n.emit(n.RESET_EVENT_NAME))),t.append(i,u);const N=_("div","scores"),a=_("div");o=_("span","x-score","0"),a.append(document.createTextNode("X: "),o);const T=_("div");c=_("span","ties","0"),T.append(document.createTextNode("Ties: "),c);const A=_("div");r=_("span","o-score","0"),A.append(document.createTextNode("O: "),r),N.append(a,T,A);const s=_("div","control");s.append(t,N);const l=_("div","player-turn");d=_("span","current-player","X"),l.append(d,document.createTextNode(" Turn"));const M=_("div","board-container");for(let t=0;t<9;t++){const E=_("div","board-cell");E.addEventListener("click",(()=>{n.emit(n.MARK_EVENT_NAME,t)})),M.appendChild(E),e.push(E)}M.append(_("div","horizontal-divider first-h-div"),_("div","horizontal-divider last-h-div"),_("div","vertical-divider first-v-div"),_("div","vertical-divider last-v-div"));const f=_("div","game");f.append(l,M),E=_("div","container"),E.append(s,f)}(),n.add(n.START_EVENT_NAME,V),n.add(n.STARTED_EVENT_NAME,R),n.add(n.WIN_EVENT_NAME,v),n.add(n.TIE_EVENT_NAME,g),n.add(n.MARKED_EVENT_NAME,y),n.add(n.RESET_BOARD_EVENT_NAME,h),n.add(n.HARD_GAME_EVENT_NAME,C),n.add(n.MEDIUM_GAME_EVENT_NAME,S),n.add(n.EASY_GAME_EVENT_NAME,x),i.textContent="1 Player",o.textContent="0",r.textContent="0",c.textContent="0",d.textContent="X",m(),s(A("players-num-choice",["1 Player","2 Players"],p)),l()}}}(),E=function(){let t,e,n,E,i,o,r,c,d,u,N,a,_;function T(t){let e=0;return{getType:function(){return t},getScore:function(){return e},incrementScore:function(){return++e}}}function A(){_++,E=n[_%2]}function s(){N=!1,a=!1,_=e,E=n[_%2],u=!0,c=1===i&&r===E.getType()}function l(e){const n=Number(e);Number.isNaN(n)||(i=n,d=2===n,d&&t.emit(t.STARTED_EVENT_NAME,E.getType()))}function M(e,i){!function(t){t.toUpperCase()===n[0].getType()?[o,r]=[n[0].getType(),n[1].getType()]:[r,o]=[n[0].getType(),n[1].getType()]}(e),function(e){"h"===(e=e.toLowerCase())?t.emit(t.HARD_GAME_EVENT_NAME):"m"===e?t.emit(t.MEDIUM_GAME_EVENT_NAME):t.emit(t.EASY_GAME_EVENT_NAME)}(i),c=r===E.getType(),c&&t.emit(t.COMPUTER_TURN_EVENT_NAME,r,o),t.emit(t.STARTED_EVENT_NAME,E.getType()),d=!0}function f(e){!d||c||N||a||t.emit(t.MARKING_EVENT_NAME,e,E.getType())}function p(){A(),1!==i||c||N||a||(t.emit(t.COMPUTER_TURN_EVENT_NAME,r,o),c=!0),u=!1}function m(){c=!1,A()}function V(){e++,N=!0,a=!1}function R(){e++,a=!0,N=!1}function y(){u?t.emit(t.RESTART_EVENT_NAME,E.getType()):(s(),t.emit(t.RESET_BOARD_EVENT_NAME,E.getType()),c&&t.emit(t.COMPUTER_TURN_EVENT_NAME,r,o))}return{init:function(c){t=c,e=0,n=[T("X"),T("O")],E=n[0],i=0,o=null,r=null,d=!1,s(),t.add(t.START_EVENT_NAME,l),t.add(t.ONE_PLAYER_GAME_EVENT_NAME,M),t.add(t.MARK_EVENT_NAME,f),t.add(t.MARKED_EVENT_NAME,p),t.add(t.WIN_EVENT_NAME,V),t.add(t.TIE_EVENT_NAME,R),t.add(t.RESET_EVENT_NAME,y),t.add(t.USER_TURN_EVENT_NAME,m)}}}();!function i(){t.init(),t.add(t.RESTART_EVENT_NAME,i),e.init(t),E.init(t),n.init(t)}()}();
//# sourceMappingURL=odin-tic-tac-toe.69d10a1c1bb84f3c75d3.bundle.js.map