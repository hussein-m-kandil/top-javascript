!function(){"use strict";class e{static#e=0;constructor(t,a,n,o){this.id=String(++e.#e),this.title=t,this.author=a,this.numOfPages=n,this.readState=Boolean(o)}setReadState(e){"boolean"==typeof e&&(this.readState=e)}}function t(e,t){if(e&&e.setAttribute&&t&&Array.isArray(t))for(let a=0;a<t.length;a++)Array.isArray(t)&&2===t[a].length&&e.setAttribute(t[a][0],t[a][1])}function a(e,a,n){const o=document.createElement("label");e&&"string"==typeof e&&o.appendChild(document.createTextNode(e)),t(o,a);const d=document.createElement("input");return t(d,n),[o,d]}function n(e,t){const a=document.createElement("span");return a.className=t??"",a.appendChild(document.createTextNode(e??"")),a}function o(e,t){const a=document.createElement("div");return a.className="book-card-entry",a.appendChild(n(e+": ","book-card-entry-title")),a.appendChild(n(t,"book-card-entry-data")),a}function d(e,t,a,n,o,d,r,l){e.textContent=t,e.classList.replace(a,n),e.classList.replace(l,r),o.textContent=d,o.classList.replace(r,l)}function r(e,t,a,n,o){const d=document.createElement("button");return d.appendChild(document.createTextNode(e)),d.setAttribute("type",t),d.className=a??"",d.id=n??"",d.value=o??"",d}function l(e,t){if(localStorage){const a=JSON.stringify(t);a.length<3145728&&localStorage.setItem(e,a)}}const c="odin-library-books";function s(e,t,a){const n=document.createElement("div");n.className="book-card";const s=document.createElement("div").appendChild(document.createTextNode(e.title)).parentElement;s.className="book-card-title";const i=document.createElement("div");i.className="book-card-body",i.appendChild(o("Author",e.author)),i.appendChild(o("Number of Pages",e.numOfPages));const u=o("Read",e.readState?"Yes":"No");u.id="read-state-"+e.id,u.lastChild.classList.add(e.readState?"success-text":"danger-text"),i.appendChild(u);const m=document.createElement("div");m.className="book-card-buttons";const p=r("Mark as "+(e.readState?"not read":"read"),"button",e.readState?"danger-border danger-text":"success-border success-text","read-state-toggler-"+e.id,e.id);p.addEventListener("click",(e=>{const t=e.target.value;for(let n=0;n<a.length;n++)if(a[n].id===t){a[n].setReadState(!a[n].readState),a[n].readState?d(e.target,"Mark as not read","success-border","danger-border",document.querySelector("#read-state-"+t).lastChild,"Yes","danger-text","success-text"):d(e.target,"Mark as read","danger-border","success-border",document.querySelector("#read-state-"+t).lastChild,"No","success-text","danger-text");break}l(c,a)}));const h=r("Delete","button","danger-text danger-border","book-card-del-btn-"+e.id,e.id);h.addEventListener("click",(e=>{for(let t=0;t<a.length;t++)if(a[t].id===e.target.value){a.splice(t,1);try{document.querySelector(".books-container")?.removeChild(e.target.parentElement.parentElement)}catch(e){console.log(e.message)}break}l(c,a)})),m.append(p,h),n.append(s,i,m),t.insertBefore(n,t.firstChild)}function i(t,n){const o=document.createElement("form");o.className="new-book-form";const[d,i]=a("Title: ",[["for","title"]],[["type","text"],["id","title"],["name","title"],["autocomplete","on"],["required",""]]);window.HTMLDialogElement&&(i.autofocus=!0),o.appendChild(document.createElement("div").appendChild(d).parentElement.appendChild(i).parentElement);const[u,m]=a("Author: ",[["for","author"]],[["type","text"],["id","author"],["name","author"],["autocomplete","on"],["required",""]]);o.appendChild(document.createElement("div").appendChild(u).parentElement.appendChild(m).parentElement);const[p,h]=a("Number of Pages: ",[["for","pages-number"]],[["type","tel"],["id","pages-number"],["name","pages-number"],["pattern","^[0-9]{1,7}$"],["autocomplete","on"],["required",""]]);h.addEventListener("invalid",(e=>{e.target.validity.patternMismatch?e.target.setCustomValidity("Numbers only are allowed here."):e.target.setCustomValidity("")})),h.addEventListener("input",(e=>{e.target.checkValidity()&&e.target.validity.customError&&e.target.setCustomValidity("")})),o.appendChild(document.createElement("div").appendChild(p).parentElement.appendChild(h).parentElement);const[b,g]=a(" Did you read this book?",[["for","read-state"]],[["type","checkbox"],["id","read-state"],["name","read-state"]]);o.appendChild(document.createElement("div").appendChild(g).parentElement.appendChild(b).parentElement);const E=r("Add New Book","submit","success-color");o.appendChild(document.createElement("div").appendChild(E).parentElement),t.appendChild(o),o.addEventListener("submit",(t=>{t.preventDefault();const a=t.target.elements,o=new e(a.title.value,a.author.value,a["pages-number"].value,a["read-state"].checked);n.unshift(o),l(c,n),s(o,document.querySelector(".books-container"),n);for(let e=0;e<a.length;e++)a[e].value="","checkbox"===a[e].type&&(a[e].checked=!1);t.target.parentElement instanceof HTMLDialogElement&&t.target.parentElement.close()}))}const u=[];if(localStorage){const e=localStorage.getItem(c);e&&u.push(...JSON.parse(e))}u.length>0?u.splice(0,u.length,...u.map((t=>new e(t.title,t.author,t.numOfPages,t.readState)))):(u.push(new e("Murder On The Orient Express","Agatha Christie","256")),u.push(new e("Death on the Nile","Agatha Christie","288",!0))),document.body.appendChild(document.createElement("h1").appendChild(document.createTextNode("Odin Library")).parentElement),window.HTMLDialogElement?function(e){const a=r("+","button","new-book-dialog-show-btn");a.addEventListener("click",(()=>{document.querySelector("dialog").showModal()})),t(a,[["aria-label","Add new book"],["title","Add new book"]]),document.body.appendChild(document.createElement("div").appendChild(a).parentElement);const n=document.createElement("dialog"),o=r("x","button","new-book-dialog-close-btn");t(o,[["aria-label","Close"],["title","Close"]]),n.appendChild(document.createElement("div").appendChild(o).parentElement),o.addEventListener("click",(()=>document.querySelector("dialog").close())),i(n,e),document.body.appendChild(n)}(u):i(document.body,u);const m=document.createElement("div");m.className="books-container",document.body.appendChild(m);for(let e=u.length-1;e>=0;e--)s(u[e],m,u)}();
//# sourceMappingURL=odin-library.a147b93d72f20ab0f3f9.bundle.js.map