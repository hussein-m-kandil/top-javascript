{"version":3,"file":"odin-async-api.3862c0e48d1670d54ecf.bundle.js","mappings":"yBAEA,MAEMA,EAAQC,SAASC,cAAc,UAC/BC,EAAYF,SAASC,cAAc,eACnCE,EAAUH,SAASC,cAAc,YACjCG,EAASJ,SAASC,cAAc,WAChCI,EAAML,SAASC,cAAc,eAC7BK,EAAUN,SAASC,cAAc,sBACjCM,EAAWP,SAASC,cAAc,UAwClCO,EAAWC,IAEG,KAAhBV,EAAMW,QACU,UAAfD,EAAME,MACW,YAAfF,EAAME,MAAoC,UAAdF,EAAMG,OAErCT,EAAQU,MAAMC,QAAU,QACxBV,EAAOS,MAAMC,QAAU,OACvBP,EAASM,MAAMC,QAAU,OA7BdC,WACb,IACE,MAAMC,QAAiBC,MACpB,sFAA+ClB,EAAMW,QACtD,CACEQ,KAAM,SAGV,IAAKF,EAASG,GACZ,MAAMC,MAAM,iDA1BGC,KAAc,IAAb,KAAEC,GAAMD,EAC5B,IAAKC,EAAKC,SAAYD,EAAKC,OAAOC,eAAiBF,EAAKC,OAAOE,SAC7D,MAAML,MAAM,oBAEd,MAAMM,EAAYJ,EAAKC,OAAOC,cAAgBF,EAAKC,OAAOE,SAC1DpB,EAAIsB,QAAU,QACdtB,EAAIuB,IAAMF,EAAUG,IACpBxB,EAAIyB,MAAQJ,EAAUI,MACtBzB,EAAI0B,OAASL,EAAUK,OACvB1B,EAAI2B,IAAMV,EAAKW,SACf3B,EAAQ4B,YAAcZ,EAAKa,MAC3B9B,EAAI+B,iBAAiB,QAAQ,KAC3BjC,EAAQU,MAAMC,QAAU,OACxBV,EAAOS,MAAMC,QAAU,OAAO,GAC9B,EAcEuB,OAAmBrB,EAASsB,OAEhC,CAAE,MAAOC,GACPhC,EAAS2B,YAAcK,EAAMC,QAC7BpC,EAAOS,MAAMC,QAAU,OACvBX,EAAQU,MAAMC,QAAU,OACxBP,EAASM,MAAMC,QAAU,OAC3B,GAYE2B,GAmBF,EAGF1C,EAAMqC,iBAAiB,UAAW5B,GAClCN,EAAUkC,iBAAiB,QAAS5B,E","sources":["webpack://top-javascript-study/./odin-async-api/index.js"],"sourcesContent":["import './index.css';\n\nconst API_BASE_URL = 'api.giphy.com/v1/gifs/translate';\nconst API_KEY = '7owj2JRjYLJ9J1aasGLlFN0sfYtuvMAC';\nconst query = document.querySelector('#query');\nconst searchBtn = document.querySelector('#search-btn');\nconst spinner = document.querySelector('#spinner');\nconst figure = document.querySelector('#result');\nconst img = document.querySelector('#result>img');\nconst caption = document.querySelector('#result>figcaption');\nconst errorDiv = document.querySelector('#error');\n\nconst updateFigure = ({ data }) => {\n  if (!data.images || (!data.images.fixed_height && !data.images.original)) {\n    throw Error('No matching GIF!');\n  }\n  const imageData = data.images.fixed_height || data.images.original;\n  img.loading = 'eager';\n  img.src = imageData.url;\n  img.width = imageData.width;\n  img.height = imageData.height;\n  img.alt = data.alt_text;\n  caption.textContent = data.title;\n  img.addEventListener('load', () => {\n    spinner.style.display = 'none';\n    figure.style.display = 'block';\n  });\n};\n\nconst getGif = async () => {\n  try {\n    const response = await fetch(\n      `https://${API_BASE_URL}?api_key=${API_KEY}&s=${query.value}`,\n      {\n        mode: 'cors',\n      },\n    );\n    if (!response.ok) {\n      throw Error(\"Cannot get GIF from 'Giphy'! Try again later.\");\n    } else {\n      updateFigure(await response.json());\n    }\n  } catch (error) {\n    errorDiv.textContent = error.message;\n    figure.style.display = 'none';\n    spinner.style.display = 'none';\n    errorDiv.style.display = 'block';\n  }\n};\n\nconst findGif = (event) => {\n  if (\n    query.value !== '' &&\n    (event.type === 'click' ||\n      (event.type === 'keydown' && event.key === 'Enter'))\n  ) {\n    spinner.style.display = 'block';\n    figure.style.display = 'none';\n    errorDiv.style.display = 'none';\n    getGif(); // Async replacement for the following code\n    // fetch(`https://${API_BASE_URL}?api_key=${API_KEY}&s=${query.value}`, {\n    //   mode: 'cors',\n    // })\n    //   .then((response) => {\n    //     if (!response.ok) {\n    //       throw Error(\"Cannot get GIF from 'Giphy'! Try again later.\");\n    //     }\n    //     return response.json();\n    //   })\n    //   .then((dataObject) => {\n    //     updateFigure(dataObject);\n    //   })\n    //   .catch((error) => {\n    //     errorDiv.textContent = error.message;\n    //     figure.style.display = 'none';\n    //     spinner.style.display = 'none';\n    //     errorDiv.style.display = 'block';\n    //   });\n  }\n};\n\nquery.addEventListener('keydown', findGif);\nsearchBtn.addEventListener('click', findGif);\n"],"names":["query","document","querySelector","searchBtn","spinner","figure","img","caption","errorDiv","findGif","event","value","type","key","style","display","async","response","fetch","mode","ok","Error","_ref","data","images","fixed_height","original","imageData","loading","src","url","width","height","alt","alt_text","textContent","title","addEventListener","updateFigure","json","error","message","getGif"],"sourceRoot":""}