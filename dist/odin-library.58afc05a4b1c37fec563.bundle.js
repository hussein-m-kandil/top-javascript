!function(){"use strict";function e(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function t(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}class a{constructor(r,o,d,l){var c,i,s;this.id=String(function(a,n,r,o){return t(a,n),e(r,"set"),function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(a,r,o),o}(a,a,n,(s=n,t(i=a,a),e(s,"get"),c=function(e,t){return t.get?t.get.call(e):t.value}(i,s),++c))),this.title=r,this.author=o,this.numOfPages=d,this.readState=Boolean(l)}setReadState(e){"boolean"==typeof e&&(this.readState=e)}}var n={writable:!0,value:0};function r(e,t){if(e&&e.setAttribute&&t&&Array.isArray(t))for(let a=0;a<t.length;a++)Array.isArray(t)&&2===t[a].length&&e.setAttribute(t[a][0],t[a][1])}function o(e,t,a){const n=document.createElement("label");e&&"string"==typeof e&&n.appendChild(document.createTextNode(e)),r(n,t);const o=document.createElement("input");return r(o,a),[n,o]}function d(e,t){const a=document.createElement("span");return a.className=t??"",a.appendChild(document.createTextNode(e??"")),a}function l(e,t){const a=document.createElement("div");return a.className="book-card-entry",a.appendChild(d(e+": ","book-card-entry-title")),a.appendChild(d(t,"book-card-entry-data")),a}function c(e,t,a,n,r,o,d,l){e.textContent=t,e.classList.replace(a,n),e.classList.replace(l,d),r.textContent=o,r.classList.replace(d,l)}function i(e,t,a,n,r){const o=document.createElement("button");return o.appendChild(document.createTextNode(e)),o.setAttribute("type",t),o.className=a??"",o.id=n??"",o.value=r??"",o}function s(e,t){if(localStorage){const a=JSON.stringify(t);a.length<3145728&&localStorage.setItem(e,a)}}const u="odin-library-books";function p(e,t,a){const n=document.createElement("div");n.className="book-card";const r=document.createElement("div").appendChild(document.createTextNode(e.title)).parentElement;r.className="book-card-title";const o=document.createElement("div");o.className="book-card-body",o.appendChild(l("Author",e.author)),o.appendChild(l("Number of Pages",e.numOfPages));const d=l("Read",e.readState?"Yes":"No");d.id="read-state-"+e.id,d.lastChild.classList.add(e.readState?"success-text":"danger-text"),o.appendChild(d);const p=document.createElement("div");p.className="book-card-buttons";const m=i("Mark as "+(e.readState?"not read":"read"),"button",e.readState?"danger-border danger-text":"success-border success-text","read-state-toggler-"+e.id,e.id);m.addEventListener("click",(e=>{const t=e.target.value;for(let n=0;n<a.length;n++)if(a[n].id===t){a[n].setReadState(!a[n].readState),a[n].readState?c(e.target,"Mark as not read","success-border","danger-border",document.querySelector("#read-state-"+t).lastChild,"Yes","danger-text","success-text"):c(e.target,"Mark as read","danger-border","success-border",document.querySelector("#read-state-"+t).lastChild,"No","success-text","danger-text");break}s(u,a)}));const h=i("Delete","button","danger-text danger-border","book-card-del-btn-"+e.id,e.id);h.addEventListener("click",(e=>{for(let t=0;t<a.length;t++)if(a[t].id===e.target.value){a.splice(t,1);try{document.querySelector(".books-container")?.removeChild(e.target.parentElement.parentElement)}catch(e){console.log(e.message)}break}s(u,a)})),p.append(m,h),n.append(r,o,p),t.insertBefore(n,t.firstChild)}function m(e,t){const n=document.createElement("form");n.className="new-book-form";const[r,d]=o("Title: ",[["for","title"]],[["type","text"],["id","title"],["name","title"],["autocomplete","on"],["required",""]]);window.HTMLDialogElement&&(d.autofocus=!0),n.appendChild(document.createElement("div").appendChild(r).parentElement.appendChild(d).parentElement);const[l,c]=o("Author: ",[["for","author"]],[["type","text"],["id","author"],["name","author"],["autocomplete","on"],["required",""]]);n.appendChild(document.createElement("div").appendChild(l).parentElement.appendChild(c).parentElement);const[m,h]=o("Number of Pages: ",[["for","pages-number"]],[["type","tel"],["id","pages-number"],["name","pages-number"],["pattern","^[0-9]{1,7}$"],["autocomplete","on"],["required",""]]);h.addEventListener("invalid",(e=>{e.target.validity.patternMismatch?e.target.setCustomValidity("Numbers only are allowed here."):e.target.setCustomValidity("")})),h.addEventListener("input",(e=>{e.target.checkValidity()&&e.target.validity.customError&&e.target.setCustomValidity("")})),n.appendChild(document.createElement("div").appendChild(m).parentElement.appendChild(h).parentElement);const[g,b]=o(" Did you read this book?",[["for","read-state"]],[["type","checkbox"],["id","read-state"],["name","read-state"]]);n.appendChild(document.createElement("div").appendChild(b).parentElement.appendChild(g).parentElement);const f=i("Add New Book","submit","success-color");n.appendChild(document.createElement("div").appendChild(f).parentElement),e.appendChild(n),n.addEventListener("submit",(e=>{e.preventDefault();const n=e.target.elements,r=new a(n.title.value,n.author.value,n["pages-number"].value,n["read-state"].checked);t.unshift(r),s(u,t),p(r,document.querySelector(".books-container"),t);for(let e=0;e<n.length;e++)n[e].value="","checkbox"===n[e].type&&(n[e].checked=!1);e.target.parentElement instanceof HTMLDialogElement&&e.target.parentElement.close()}))}const h=[];if(localStorage){const e=localStorage.getItem(u);e&&h.push(...JSON.parse(e))}h.length>0?h.splice(0,h.length,...h.map((e=>new a(e.title,e.author,e.numOfPages,e.readState)))):(h.push(new a("Murder On The Orient Express","Agatha Christie","256")),h.push(new a("Death on the Nile","Agatha Christie","288",!0))),document.body.appendChild(document.createElement("h1").appendChild(document.createTextNode("Odin Library")).parentElement),window.HTMLDialogElement?function(e){const t=i("+","button","new-book-dialog-show-btn");t.addEventListener("click",(()=>{document.querySelector("dialog").showModal()})),r(t,[["aria-label","Add new book"],["title","Add new book"]]),document.body.appendChild(document.createElement("div").appendChild(t).parentElement);const a=document.createElement("dialog"),n=i("x","button","new-book-dialog-close-btn");r(n,[["aria-label","Close"],["title","Close"]]),a.appendChild(document.createElement("div").appendChild(n).parentElement),n.addEventListener("click",(()=>document.querySelector("dialog").close())),m(a,e),document.body.appendChild(a)}(h):m(document.body,h);const g=document.createElement("div");g.className="books-container",document.body.appendChild(g);for(let e=h.length-1;e>=0;e--)p(h[e],g,h)}();
//# sourceMappingURL=odin-library.58afc05a4b1c37fec563.bundle.js.map